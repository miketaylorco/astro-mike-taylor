---
import Main from '../../layouts/main.astro';
const contentProps = { title: "Authentication Error" };

const url = new URL(Astro.request.url);
const errorMessage = url.searchParams.get('message') || 'unknown_error';

const errorMessages: Record<string, { title: string; description: string }> = {
  missing_code: {
    title: "Missing Authentication Code",
    description: "The authentication link appears to be invalid or incomplete. Please try signing in again."
  },
  auth_failed: {
    title: "Authentication Failed",
    description: "We couldn't verify your identity. The link may have expired or already been used. Please try signing in again."
  },
  access_denied: {
    title: "Access Denied",
    description: "You don't have permission to access this content. If you believe this is an error, please contact the site administrator."
  },
  unknown_error: {
    title: "Something Went Wrong",
    description: "An unexpected error occurred. Please try again later."
  }
};

const error = errorMessages[errorMessage] || errorMessages.unknown_error;
---

<Main content={contentProps}>
<main class="container mx-auto min-h-screen max-w-md p-8 flex flex-col items-center justify-center">
  <div class="bg-white rounded-lg shadow-lg p-8 text-center">
    <div class="mb-6">
      <svg class="w-16 h-16 mx-auto text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
      </svg>
    </div>
    <h1 class="text-2xl font-bold mb-4 text-red-600">{error.title}</h1>
    <p class="text-gray-600 mb-6">
      {error.description}
    </p>
    <div class="flex flex-col gap-4">
      <a href="/" class="text-blue-500 hover:underline">
        &larr; Back to home
      </a>
    </div>
  </div>
</main>
</Main>
